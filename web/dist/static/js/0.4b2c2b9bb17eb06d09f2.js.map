{"version":3,"sources":["webpack:///src/components/Comments.vue","webpack:///./src/components/Comments.vue?1eb0","webpack:///./src/components/Comments.vue","webpack:///src/views/article/detail.vue","webpack:///./src/views/article/detail.vue?5922","webpack:///./src/views/article/detail.vue"],"names":["Comments","props","data","ruleForm","nickname","email","content","rules","validator","rule","value","callback","Error","trigger","test","computed","extends_default","Object","vuex_esm","userInfo","state","user","created","methods","createComments","changePage","page","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","$emit","stop","resetForm","formName","$refs","resetFields","showMessage","message","type","arguments","length","undefined","$message","submitForm","_ref","_this2","validate","_callee2","valid","_context2","createArticleComments","abrupt","_x2","apply","_this3","_callee3","_ruleForm","res","newComments","_context3","article_id","id","sent","components_Comments","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","status-icon","label-position","label-width","label","prop","placeholder","$$v","$set","expression","autofocus","ishljs","on","click","$event","commentsList","_l","item","index","key","_s","staticStyle","min-height","width","defaultOpen","editable","subfield","toolbarsFlag","meta","background","layout","page-count","count","current-page","current_page","total","current-change","_e","staticRenderFns","detail","components","VComments","__webpack_require__","normalizeComponent","ssrContext","$route","params","getArticle","$router","push","getArticleDetail","getCommentsList","updateComments","comments_list","unshift","changeCommentsPage","document","title","article_detail","category_detail","name","author","browse","created_at","height","detail_Component","detail_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/0.4b2c2b9bb17eb06d09f2.js","sourcesContent":["<template>\n  <section>\n    <section class=\"comments-create\">\n      <h1 class=\"comments-title\">欢迎评论</h1>\n\n      <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" label-position=\"left\" ref=\"ruleForm\" label-width=\"50px\"\n               class=\"demo-ruleForm\">\n        <el-form-item label=\"昵称\" prop=\"nickname\">\n          <el-input type=\"text\" placeholder=\"请输入您的昵称\" v-model=\"ruleForm.nickname\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input type=\"text\" placeholder=\"请输入您的邮箱（不会被公开）\" v-model=\"ruleForm.email\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"内容\" prop=\"content\">\n          <!--          <el-input type=\"textarea\" placeholder=\"评论内容..\" rows=\"4\" v-model=\"ruleForm.content\"-->\n          <!--                    autocomplete=\"off\"></el-input>-->\n          <mavon-editor\n            class=\"mavon-editor--box\"\n            v-model=\"ruleForm.content\"\n            :autofocus=\"false\"\n            placeholder=\"请输入评论内容\"\n            :ishljs=\"true\">\n          </mavon-editor>\n        </el-form-item>\n        <el-form-item>\n          <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">提交评论</el-button>\n        </el-form-item>\n      </el-form>\n    </section>\n\n    <section class=\"comments-list\" v-if=\"commentsList && commentsList.data.length > 0\">\n      <h1 class=\"comments-title\">评论列表</h1>\n      <ul class=\"comments-box\">\n        <li v-for=\"(item, index) in commentsList.data\"\n            class=\"comments-item\"\n            :key=\"index\">\n          <div class=\"comments-item-username\">\n            <i class=\"icon el-icon-chat-dot-round\"></i> 来自「{{item.nickname}}」的评论：\n          </div>\n          <div class=\"comments-item-content\">\n            <mavon-editor\n              style=\"min-height: 0;width: 100%\"\n              :ishljs=\"true\"\n              v-model=\"item.content\"\n              :defaultOpen=\"'preview'\"\n              :editable=\"false\"\n              :subfield=\"false\"\n              :toolbarsFlag=\"false\">\n            </mavon-editor>\n          </div>\n        </li>\n      </ul>\n      <section class=\"page\" v-if=\"commentsList && commentsList.meta\">\n        <el-pagination\n          background\n          layout=\"prev, pager, next\"\n          :page-count=\"commentsList.meta.count\"\n          :current-page=\"commentsList.meta.current_page\"\n          @current-change=\"changePage\"\n          :total=\"commentsList.meta.total\">\n        </el-pagination>\n      </section>\n    </section>\n  </section>\n</template>\n\n<script>\n  import {mapState, mapActions} from 'vuex'\n\n  export default {\n    props: ['id', 'commentsList'],\n    data() {\n      var validateEmail = (rule, value, callback) => {\n        const reg = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\n\n        if (value === '') {\n          callback(new Error('请输入邮箱'));\n\n        } else if (!reg.test(value)) {\n          callback(new Error('请输入正确的邮箱'));\n        } else {\n          callback();\n        }\n      };\n      var validateNickname = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('请输入昵称'));\n        } else {\n          callback();\n        }\n      };\n      var validateContent = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('请输入评论内容'));\n        } else {\n          callback();\n        }\n      };\n      return {\n        ruleForm: {\n          nickname: '',\n          email: '',\n          content: ''\n        },\n        rules: {\n          nickname: [\n            {validator: validateNickname, trigger: 'blur'}\n          ],\n          email: [\n            {validator: validateEmail, trigger: 'blur'}\n          ],\n          content: [\n            {validator: validateContent, trigger: 'blur'}\n          ],\n        }\n      }\n    },\n    computed: {\n      ...mapState({\n        userInfo: state => state.user.userInfo\n      })\n    },\n    created() {\n\n    },\n    methods: {\n      ...mapActions({\n        createComments: 'comments/createComments'\n      }),\n\n      /**\n       * 切换页码\n       * @page 页码\n       */\n      async changePage(page) {\n        this.$emit('changeCommentsPage', page);\n      },\n\n      // 重置表单\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n      },\n      // 显示信息\n      showMessage(message, type = 'success') {\n        this.$message({\n          message,\n          type\n        });\n      },\n\n      // 提交表单\n      submitForm(formName) {\n        this.$refs[formName].validate(async (valid) => {\n          if (valid) {\n            await this.createArticleComments();\n\n          } else {\n            this.showMessage('请完善表单', 'error');\n            return false;\n          }\n        });\n      },\n\n      // 创建评论\n      async createArticleComments() {\n        let {content, nickname, email} = this.ruleForm;\n\n        const res = await this.createComments({\n          email,\n          nickname,\n          content,\n          article_id: this.id,\n        });\n\n        this.$message({\n          message: '评论成功',\n          type: 'success'\n        });\n\n        this.resetForm('ruleForm');\n        const newComments = res.data.data;\n        this.$emit('updateComments', newComments);\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  .comments-title {\n    padding: 16px 0;\n    color: #409EFF;\n    font-size: 36px;\n  }\n\n  .comments-create {\n    width: 100%;\n\n    .comments-input-item {\n      margin-bottom: 16px;\n    }\n  }\n\n  .comments-list {\n    width: 100%;\n    box-sizing: border-box;\n\n    .comments-item {\n      padding: 24px 0;\n      border-bottom: 1px solid #f0f0f0;\n\n    }\n\n    .comments-item-username {\n      font-size: 22px;\n      color: #409EFF;\n      font-weight: bold;\n    }\n\n    .comments-item-content {\n      box-sizing: border-box;\n      padding: 24px 24px 0 24px;\n      font-size: 16px;\n    }\n  }\n\n  .page {\n    padding: 32px 0;\n    text-align: center;\n  }\n\n  @media screen and (min-width: 200px) and (max-width: 768px) {\n    .comments-create {\n      width: 100%;\n    }\n  }\n\n</style>\n\n<style lang=\"scss\">\n  .comments-item-content {\n    width: 100%;\n    box-sizing: border-box;\n\n    & .v-note-wrapper .v-note-panel {\n      box-shadow: none !important;\n    }\n\n    & .v-note-wrapper .v-note-panel .v-note-show .v-show-content, .v-note-wrapper .v-note-panel .v-note-show .v-show-content-html {\n      background: #fff !important;\n    }\n\n    & .v-note-wrapper .v-note-panel .v-note-edit.divarea-wrapper .content-input-wrapper {\n      padding: 0 !important;\n    }\n\n    & .v-note-wrapper .v-note-panel .v-note-show .v-show-content, .v-note-wrapper .v-note-panel .v-note-show .v-show-content-html {\n      padding: 0 !important;\n    }\n\n    .markdown-body blockquote, .markdown-body dl, .markdown-body ol, .markdown-body p, .markdown-body pre, .markdown-body table, .markdown-body ul {\n      margin-bottom: 0 !important;\n    }\n\n    .markdown-body {\n      font-size: 18px !important;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Comments.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('section',{staticClass:\"comments-create\"},[_c('h1',{staticClass:\"comments-title\"},[_vm._v(\"欢迎评论\")]),_vm._v(\" \"),_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"50px\"}},[_c('el-form-item',{attrs:{\"label\":\"昵称\",\"prop\":\"nickname\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入您的昵称\"},model:{value:(_vm.ruleForm.nickname),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"nickname\", $$v)},expression:\"ruleForm.nickname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入您的邮箱（不会被公开）\"},model:{value:(_vm.ruleForm.email),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"email\", $$v)},expression:\"ruleForm.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"内容\",\"prop\":\"content\"}},[_c('mavon-editor',{staticClass:\"mavon-editor--box\",attrs:{\"autofocus\":false,\"placeholder\":\"请输入评论内容\",\"ishljs\":true},model:{value:(_vm.ruleForm.content),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"content\", $$v)},expression:\"ruleForm.content\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"提交评论\")])],1)],1)],1),_vm._v(\" \"),(_vm.commentsList && _vm.commentsList.data.length > 0)?_c('section',{staticClass:\"comments-list\"},[_c('h1',{staticClass:\"comments-title\"},[_vm._v(\"评论列表\")]),_vm._v(\" \"),_c('ul',{staticClass:\"comments-box\"},_vm._l((_vm.commentsList.data),function(item,index){return _c('li',{key:index,staticClass:\"comments-item\"},[_c('div',{staticClass:\"comments-item-username\"},[_c('i',{staticClass:\"icon el-icon-chat-dot-round\"}),_vm._v(\" 来自「\"+_vm._s(item.nickname)+\"」的评论：\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"comments-item-content\"},[_c('mavon-editor',{staticStyle:{\"min-height\":\"0\",\"width\":\"100%\"},attrs:{\"ishljs\":true,\"defaultOpen\":'preview',\"editable\":false,\"subfield\":false,\"toolbarsFlag\":false},model:{value:(item.content),callback:function ($$v) {_vm.$set(item, \"content\", $$v)},expression:\"item.content\"}})],1)])}),0),_vm._v(\" \"),(_vm.commentsList && _vm.commentsList.meta)?_c('section',{staticClass:\"page\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"page-count\":_vm.commentsList.meta.count,\"current-page\":_vm.commentsList.meta.current_page,\"total\":_vm.commentsList.meta.total},on:{\"current-change\":_vm.changePage}})],1):_vm._e()]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-442b292b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Comments.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-442b292b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Comments.vue\")\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-442b292b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=1!./Comments.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Comments.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Comments.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-442b292b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Comments.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-442b292b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Comments.vue\n// module id = null\n// module chunks = ","<template>\n  <section class=\"container\" v-if=\"detail\">\n    <section class=\"content\">\n      <h1 class=\"article-title\">{{detail.title}}</h1>\n\n      <div class=\"article-info\">\n        <p class=\"article-category\" v-if=\"detail.category_detail\">\n          {{detail.category_detail.name}}\n        </p>\n        <p class=\"article-author\"><i class=\"icon el-icon-user\"></i> {{detail.author}}</p>\n        <p class=\"article-browse\"><i class=\"icon el-icon-view\"></i> {{detail.browse}}</p>\n        <p class=\"article-browse\"><i class=\"icon el-icon-chat-dot-round\"></i> {{detail.comments_list.data.length}}</p>\n        <p class=\"article-create-at\"><i class=\"icon el-icon-time\"></i> {{detail.created_at}}</p>\n      </div>\n\n      <div class=\"article-detail\" id=\"article-detail\">\n        <mavon-editor\n          style=\"height: 100%\"\n          :ishljs=\"true\"\n          v-model=\"detail.content\"\n          :defaultOpen=\"'preview'\"\n          :editable=\"false\"\n          :subfield=\"false\"\n          :toolbarsFlag=\"false\">\n        </mavon-editor>\n      </div>\n\n      <div class=\"v-comments\">\n        <v-comments\n          :commentsList=detail.comments_list\n          @changeCommentsPage=\"changeCommentsPage\"\n          @updateComments=\"updateComments\"\n          :id=\"id\">\n        </v-comments>\n      </div>\n    </section>\n  </section>\n</template>\n<script>\n  import {mapState, mapActions} from 'vuex'\n  import VComments from '../../components/Comments'\n\n  export default {\n    components: {\n      VComments\n    },\n    data() {\n      return {\n        // 文章ID\n        id: this.$route.params.id,\n        // 文章详情\n        detail: null\n      }\n    },\n    created() {\n      if (!this.id) {\n        this.$router.push('/article');\n      } else {\n        this.getArticle();\n      }\n    },\n\n    methods: {\n      ...mapActions({\n        getArticleDetail: 'article/getArticleDetail',\n        getCommentsList: 'comments/getCommentsList',\n        createComments: 'comments/createComments'\n      }),\n\n      // 更新评论\n      updateComments(newComments) {\n        this.detail.comments_list.data.unshift(newComments);\n      },\n      // 切换评论页面\n      async changeCommentsPage(page) {\n        const res = await this.getCommentsList({\n          article_id: this.id,\n          page\n        });\n\n        this.detail.comments_list = res.data.data;\n      },\n      /**\n       * 获取文章详情\n       * @returns 文章详情\n       */\n      async getArticle() {\n        let res = await this.getArticleDetail(this.id);\n        this.detail = res.data.data;\n        document.title = this.detail.title;\n      }\n\n    }\n  }\n</script>\n\n\n<style lang=\"scss\" scoped>\n  .container {\n    box-sizing: border-box;\n    position: relative;\n    width: 70%;\n    margin: 24px auto;\n\n    & .content {\n      box-sizing: border-box;\n      padding: 32px;\n      position: relative;\n      width: 100%;\n      background: #fff;\n      border-radius: 8px;\n\n      & .article-title {\n        font-size: 54px;\n        color: #404040;\n      }\n\n      & .article-info {\n        width: 100%;\n        & p {\n          display: inline-block;\n          margin-right: 24px;\n          margin-top: 24px;\n          font-size: 16px;\n          color: #9ea7b4;\n        }\n\n        & p.article-category {\n          height: 32px;\n          line-height: 32px;\n          padding: 0 32px;\n          font-size: 16px;\n          color: #409EFF;\n          border-radius: 32px;\n          background: rgba(51, 119, 255, .1);\n        }\n      }\n\n      & .article-detail {\n        font-size: 20px;\n        color: #657180;\n        line-height: 48px;\n        margin-top: 32px;\n      }\n    }\n  }\n\n  @media screen and (min-width: 200px) and (max-width: 768px) {\n    .container {\n      width: 100%;\n    }\n    .container .content .article-info p.article-created-at {\n      display: none;\n    }\n  }\n\n</style>\n<style lang=\"scss\">\n  #article-detail {\n    & .v-note-wrapper .v-note-panel {\n      box-shadow: none !important;\n    }\n\n    & .v-note-wrapper .v-note-panel .v-note-show .v-show-content, .v-note-wrapper .v-note-panel .v-note-show .v-show-content-html {\n      background: #fff !important;\n    }\n\n    & .v-note-wrapper .v-note-panel .v-note-edit.divarea-wrapper .content-input-wrapper {\n      padding: 0 !important;\n    }\n\n    & .v-note-wrapper .v-note-panel .v-note-show .v-show-content, .v-note-wrapper .v-note-panel .v-note-show .v-show-content-html {\n      padding: 0 !important;\n    }\n  }\n</style>\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/views/article/detail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.detail)?_c('section',{staticClass:\"container\"},[_c('section',{staticClass:\"content\"},[_c('h1',{staticClass:\"article-title\"},[_vm._v(_vm._s(_vm.detail.title))]),_vm._v(\" \"),_c('div',{staticClass:\"article-info\"},[(_vm.detail.category_detail)?_c('p',{staticClass:\"article-category\"},[_vm._v(\"\\n        \"+_vm._s(_vm.detail.category_detail.name)+\"\\n      \")]):_vm._e(),_vm._v(\" \"),_c('p',{staticClass:\"article-author\"},[_c('i',{staticClass:\"icon el-icon-user\"}),_vm._v(\" \"+_vm._s(_vm.detail.author))]),_vm._v(\" \"),_c('p',{staticClass:\"article-browse\"},[_c('i',{staticClass:\"icon el-icon-view\"}),_vm._v(\" \"+_vm._s(_vm.detail.browse))]),_vm._v(\" \"),_c('p',{staticClass:\"article-browse\"},[_c('i',{staticClass:\"icon el-icon-chat-dot-round\"}),_vm._v(\" \"+_vm._s(_vm.detail.comments_list.data.length))]),_vm._v(\" \"),_c('p',{staticClass:\"article-create-at\"},[_c('i',{staticClass:\"icon el-icon-time\"}),_vm._v(\" \"+_vm._s(_vm.detail.created_at))])]),_vm._v(\" \"),_c('div',{staticClass:\"article-detail\",attrs:{\"id\":\"article-detail\"}},[_c('mavon-editor',{staticStyle:{\"height\":\"100%\"},attrs:{\"ishljs\":true,\"defaultOpen\":'preview',\"editable\":false,\"subfield\":false,\"toolbarsFlag\":false},model:{value:(_vm.detail.content),callback:function ($$v) {_vm.$set(_vm.detail, \"content\", $$v)},expression:\"detail.content\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"v-comments\"},[_c('v-comments',{attrs:{\"commentsList\":_vm.detail.comments_list,\"id\":_vm.id},on:{\"changeCommentsPage\":_vm.changeCommentsPage,\"updateComments\":_vm.updateComments}})],1)])]):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3e884371\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/article/detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3e884371\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./detail.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3e884371\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rem-loader?{\\\"remUnit\\\":75}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3e884371\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3e884371\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/article/detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}